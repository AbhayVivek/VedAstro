@using Genso.Astrology.Library

<div class="border border-1 mt-3">
    <div class="container mt-3">
        <div id="@TableId"></div>
    </div>
</div>





@code {



    //FIELDS
    const string TableId = "LifeEventsListTable"; //change only needed here



    //PROPERTIES

    [Parameter]
    public List<Event> LifeEventList { get; set; }



    //-------------------EVENT HANDLERS

    private async Task OnClickAddButton()
    {
        //show loading message
        await _globalVariable.LoadingMessage.Show();



        //page ready
        await _globalVariable.LoadingMessage.Hide();

    }

    public async Task SetData(List<LifeEvent> lifeEventList)
    {
        //show loading message
        await _globalVariable.LoadingMessage.Show();

        //convert objects to json (for js generator library)
        //and calls js code change table directly
        await _jsRuntime.InvokeVoidAsync("generateLifeEventListTable", TableId, lifeEventList.ToArray());

        //page ready
        await _globalVariable.LoadingMessage.Hide();

    }


    /// <summary>
    /// gets the life events entered into Tabulator js table
    /// converts it into life event instances
    /// </summary>
    public async Task<List<LifeEvent>> GetData()
    {
        var result = await _jsRuntime.InvokeAsync<object>("getLifeEventsListTableData");

        throw new NotImplementedException();
    }


}
